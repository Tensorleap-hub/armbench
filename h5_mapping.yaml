decorators:
  - operation: Input
    data:
      type: Input
      output_name: images
    id: '144'
    inputs: {}
    outputs:
      images:
        - inputKey: input
          operation: Permute
          name: permute_139
          id: '143'
        - inputKey: data
          operation: Visualizer
          id: '440'
  - operation: CustomLoss
    data:
      type: CustomLoss
      name: instance_seg loss
      selected: instance_seg loss
      user_unique_name: instance_seg loss
      arg_names:
        - bb_gt
        - detection_pred
        - mask_gt
        - segmentation_pred
    id: '436'
    inputs:
      detection_pred:
        - outputKey: merged
          operation: Concatenate
          name: output
          id: '1'
      segmentation_pred:
        - outputKey: feature_map
          operation: Permute
          name: permute_141
          id: '402'
      bb_gt:
        - outputKey: bbs
          operation: GroundTruth
          id: '437'
      mask_gt:
        - outputKey: masks
          operation: GroundTruth
          id: '438'
    outputs:
      loss:
        - inputKey: '0'
          operation: Adam
          id: '439'
  - operation: GroundTruth
    data:
      type: GroundTruth
      output_name: bbs
    id: '437'
    inputs: {}
    outputs:
      bbs:
        - inputKey: bb_gt
          operation: CustomLoss
          id: '436'
        - inputKey: bb_gt
          operation: Visualizer
          id: '441'
        - inputKey: bb_gt
          operation: Visualizer
          id: '443'
        - inputKey: bb_gt
          operation: Visualizer
          id: '446'
        - inputKey: bb_gt
          operation: Visualizer
          id: '447'
        - inputKey: bb_gt
          operation: Metric
          id: '448'
        - inputKey: bb_gt
          operation: Metric
          id: '449'
        - inputKey: bb_gt
          operation: Metric
          id: '451'
  - operation: GroundTruth
    data:
      type: GroundTruth
      output_name: masks
    id: '438'
    inputs: {}
    outputs:
      masks:
        - inputKey: mask_gt
          operation: CustomLoss
          id: '436'
        - inputKey: masks_gt
          operation: Visualizer
          id: '441'
        - inputKey: mask_gt
          operation: Visualizer
          id: '446'
        - inputKey: mask_gt
          operation: Visualizer
          id: '447'
        - inputKey: mask_gt
          operation: Metric
          id: '448'
        - inputKey: mask_gt
          operation: Metric
          id: '449'
  - operation: Adam
    data:
      type: Optimizer
      custom_input_keys:
        - 439-0
    id: '439'
    inputs:
      '0':
        - outputKey: loss
          operation: CustomLoss
          id: '436'
    outputs: {}
  - operation: Visualizer
    data:
      type: Visualizer
      name: Image
      visualizer_name: Image
      visualizer_type: Image
      arg_names:
        - data
      user_unique_name: Image
    id: '440'
    inputs:
      data:
        - outputKey: images
          operation: Input
          id: '144'
    outputs: {}
  - operation: Visualizer
    data:
      type: Visualizer
      name: gt_mask
      visualizer_name: gt_mask
      visualizer_type: ImageMask
      arg_names:
        - image
        - bb_gt
        - masks_gt
      user_unique_name: gt_mask
    id: '441'
    inputs:
      bb_gt:
        - outputKey: bbs
          operation: GroundTruth
          id: '437'
      masks_gt:
        - outputKey: masks
          operation: GroundTruth
          id: '438'
      image:
        - outputKey: images
          operation: Input
          id: '442'
    outputs: {}
  - operation: Input
    data:
      type: Input
      output_name: images
      selected: images
    id: '442'
    inputs: {}
    outputs:
      images:
        - inputKey: image
          operation: Visualizer
          id: '441'
        - inputKey: image
          operation: Visualizer
          id: '443'
        - inputKey: image
          operation: Visualizer
          id: '444'
        - inputKey: image
          operation: Visualizer
          id: '445'
        - inputKey: image
          operation: Visualizer
          id: '446'
        - inputKey: image
          operation: Visualizer
          id: '447'
        - inputKey: image
          operation: Metric
          id: '449'
  - operation: Visualizer
    data:
      type: Visualizer
      name: bb_gt_decoder
      visualizer_name: bb_gt_decoder
      visualizer_type: ImageWithBBox
      arg_names:
        - image
        - bb_gt
      user_unique_name: bb_gt_decoder
    id: '443'
    inputs:
      bb_gt:
        - outputKey: bbs
          operation: GroundTruth
          id: '437'
      image:
        - outputKey: images
          operation: Input
          id: '442'
    outputs: {}
  - operation: Visualizer
    data:
      type: Visualizer
      name: pred_mask
      visualizer_name: pred_mask
      visualizer_type: ImageMask
      arg_names:
        - image
        - y_pred_bbs
        - y_pred_mask
      user_unique_name: pred_mask
    id: '444'
    inputs:
      y_pred_bbs:
        - outputKey: merged
          operation: Concatenate
          name: output
          id: '1'
      y_pred_mask:
        - outputKey: feature_map
          operation: Permute
          name: permute_141
          id: '402'
      image:
        - outputKey: images
          operation: Input
          id: '442'
    outputs: {}
  - operation: Visualizer
    data:
      type: Visualizer
      name: bb_decoder
      visualizer_name: bb_decoder
      visualizer_type: ImageWithBBox
      arg_names:
        - image
        - bb_prediction
      user_unique_name: bb_decoder
    id: '445'
    inputs:
      bb_prediction:
        - outputKey: merged
          operation: Concatenate
          name: output
          id: '1'
      image:
        - outputKey: images
          operation: Input
          id: '442'
    outputs: {}
  - operation: Visualizer
    data:
      type: Visualizer
      name: under segment
      visualizer_name: under segment
      visualizer_type: ImageWithBBox
      arg_names:
        - image
        - y_pred_bb
        - y_pred_mask
        - bb_gt
        - mask_gt
      user_unique_name: under segment
    id: '446'
    inputs:
      y_pred_bb:
        - outputKey: merged
          operation: Concatenate
          name: output
          id: '1'
      y_pred_mask:
        - outputKey: feature_map
          operation: Permute
          name: permute_141
          id: '402'
      bb_gt:
        - outputKey: bbs
          operation: GroundTruth
          id: '437'
      mask_gt:
        - outputKey: masks
          operation: GroundTruth
          id: '438'
      image:
        - outputKey: images
          operation: Input
          id: '442'
    outputs: {}
  - operation: Visualizer
    data:
      type: Visualizer
      name: over segment
      visualizer_name: over segment
      visualizer_type: ImageWithBBox
      arg_names:
        - image
        - y_pred_bb
        - y_pred_mask
        - bb_gt
        - mask_gt
      user_unique_name: over segment
    id: '447'
    inputs:
      y_pred_bb:
        - outputKey: merged
          operation: Concatenate
          name: output
          id: '1'
      y_pred_mask:
        - outputKey: feature_map
          operation: Permute
          name: permute_141
          id: '402'
      bb_gt:
        - outputKey: bbs
          operation: GroundTruth
          id: '437'
      mask_gt:
        - outputKey: masks
          operation: GroundTruth
          id: '438'
      image:
        - outputKey: images
          operation: Input
          id: '442'
    outputs: {}
  - operation: Metric
    data:
      type: Metric
      name: general_metrics
      metric_name: general_metrics
      arg_names:
        - bb_gt
        - detection_pred
        - mask_gt
        - segmentation_pred
      user_unique_name: general_metrics
    id: '448'
    inputs:
      detection_pred:
        - outputKey: merged
          operation: Concatenate
          name: output
          id: '1'
      segmentation_pred:
        - outputKey: feature_map
          operation: Permute
          name: permute_141
          id: '402'
      bb_gt:
        - outputKey: bbs
          operation: GroundTruth
          id: '437'
      mask_gt:
        - outputKey: masks
          operation: GroundTruth
          id: '438'
    outputs: {}
  - operation: Metric
    data:
      type: Metric
      name: segmentation_metrics
      metric_name: segmentation_metrics
      arg_names:
        - image
        - y_pred_bb
        - y_pred_mask
        - bb_gt
        - mask_gt
      user_unique_name: segmentation_metrics
    id: '449'
    inputs:
      y_pred_bb:
        - outputKey: merged
          operation: Concatenate
          name: output
          id: '1'
      y_pred_mask:
        - outputKey: feature_map
          operation: Permute
          name: permute_141
          id: '402'
      bb_gt:
        - outputKey: bbs
          operation: GroundTruth
          id: '437'
      mask_gt:
        - outputKey: masks
          operation: GroundTruth
          id: '438'
      image:
        - outputKey: images
          operation: Input
          id: '442'
    outputs: {}
  - operation: Metric
    data:
      type: Metric
      name: Confusion Matrix
      metric_name: Confusion Matrix
      arg_names:
        - bb_gt
        - y_pred_bb
      user_unique_name: Confusion Matrix
    id: '451'
    inputs:
      y_pred_bb:
        - outputKey: merged
          operation: Concatenate
          name: output
          id: '1'
      bb_gt:
        - outputKey: bbs
          operation: GroundTruth
          id: '437'
    outputs: {}
layers:
  - operation: Concatenate
    data:
      prediction_type: object detection
    name: output
    id: '1'
  - operation: Permute
    data:
      prediction_type: segementation masks
    name: permute_141
    id: '402'

